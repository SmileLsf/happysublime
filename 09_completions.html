<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>代码补全</title>
    <link rel="stylesheet" href="./css/master.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="./css/colortheme.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="icon" type="image/png" href="./images/sublime.png" />
  </head>
  <body>
    <div id='wrapper'>
      <div id='header'>
        <h1>Sublime</h1>
        <h2>代码补全</h2>
      </div>
      <div id='menu'>
        <ul>
          <li><a href='/happysublime'>目录</a></li>
          <li><a href='./about.html'>关于</a></li>
        </ul>
      </div>
      <div class='content'>
        <p>前面两集 emmet 和 snippet 其实都是属于“补全”这个功能。 英文是 Completion 。总的参考文档 <a href="http://docs.sublimetext.info/en/latest/extensibility/completions.html">在这里</a> 。</p>

<h3 id="tab-">Tab 补全</h3>

<p><code>Settings Defualt</code> 下有这些内容</p>

<pre><code>"tab_completion": true,
</code></pre>

<p>意思是打开一个文件，敲一个触发词，然后敲 tab 是能补全成一个片段的。这个没有什么陌生的，前面 snippets 一集，就属于这种情况。只不过不是唯一的一种情况。</p>

<p>根据 <a href="http://docs.sublimetext.info/en/latest/extensibility/completions.html#sources-for-completions-and-their-priorities">这里</a> 的说明，tab 补全功能依次会在下面四个地方去找触发词，英文术语叫 Trigger 。</p>

<pre><code> 1. Snippets
 2. 通过 API on_query_completions() 设置的内容，这个咱们暂时不管
 3. 专门的自动补全文件，也就是 xxx.sublime-completions    4. 当前文件中已经敲过的词
</code></pre>

<p>上面这四个地方找到的触发词都会出现在 “补全列表” 中。例如在一个 markdown 文件中，已经敲过了 <code>test</code> 这个单词，并且也知道前面一集也定义了 <code>top</code> 这个 snippet 。那么敲一下 <code>t</code> 如何才能看到这个补全列表呢？</p>

<p>Keybinding Default 中有相关设置：</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span> <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ctrl+space&quot;</span><span class="p">],</span> <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;auto_complete&quot;</span> <span class="p">}</span><span class="err">,</span></code></pre></div>

<p>意思是只要敲 ctrl+space 快捷键，就可以看到跟自动补全一样的效果了。但是我这里 ctrl+space 用来切换中文输入法了，所以要在 Keybinding User 中改一下</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span> <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;alt+space&quot;</span><span class="p">],</span> <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;auto_complete&quot;</span> <span class="p">}</span><span class="err">,</span></code></pre></div>

<p>这样就可以了。如果列表中只有一项，那么直接敲快捷键就补全出来了。如果有多项，每次敲一下可以跳到下一项。选中可以敲 tab 或者 Enter 。</p>

<h3 id="section">自定制补全文件</h3>

<p>来说说列表中提到的第三项补全文件。看怎么来自己添加触发词。参考：<a href="http://docs.sublimetext.info/en/latest/reference/completions.html">Completion Files</a></p>

<h3 id="section-1">自动补全</h3>

<p>参考 <a href="https://www.sublimetext.com/docs/3/auto_complete.html">这里</a> 。</p>

<p>“自动补全”并不说又有了一种新的补全方式。而只是说输入了触发词，那么不用敲 tab ，就可以显示可能的触发词了，默认只要敲 Enter 就可以补全了。</p>

<p>这个功能也是在 Settings - Default 中默认就设置好的：</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">&quot;auto_complete&quot;</span><span class="err">:</span> <span class="kc">true</span><span class="err">,</span></code></pre></div>

<p>但是，自动补全的不是在每种文件类型中都会被触发的，Settings Default 中是这样设置的</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">//</span> <span class="err">Controls</span> <span class="err">what</span> <span class="err">scopes</span> <span class="err">auto</span> <span class="err">complete</span> <span class="err">will</span> <span class="err">be</span> <span class="err">triggered</span> <span class="err">in</span>
<span class="s2">&quot;auto_complete_selector&quot;</span><span class="err">:</span> <span class="s2">&quot;source - comment, meta.tag - punctuation.definition.tag.begin&quot;</span><span class="err">,</span>

<span class="err">//</span> <span class="err">Additional</span> <span class="err">situations</span> <span class="err">to</span> <span class="err">trigger</span> <span class="err">auto</span> <span class="err">complete</span>
<span class="s2">&quot;auto_complete_triggers&quot;</span><span class="err">:</span> <span class="p">[</span> <span class="p">{</span><span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="s2">&quot;text.html&quot;</span><span class="p">,</span> <span class="nt">&quot;characters&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">}</span> <span class="p">]</span><span class="err">,</span></code></pre></div>

<p>有一个问题是这时候，自动补全生效的时候，回车就不能用来换行了，怎么解决？</p>

<p>Settings Default 下面有</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">&quot;auto_complete_commit_on_tab&quot;</span><span class="err">:</span> <span class="kc">false</span><span class="err">,</span></code></pre></div>

<p>在 Setting User 中</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">&quot;auto_complete_commit_on_tab&quot;</span><span class="err">:</span> <span class="kc">true</span><span class="err">,</span></code></pre></div>

<p>这样就可以敲 tab 来补全，而 Enter 现在就可以用来输入换行了。</p>

<p>最后，如果觉得还是补全的不够丰富，可以看看 <a href="http://sublimecodeintel.github.io/SublimeCodeIntel/">http://sublimecodeintel.github.io/SublimeCodeIntel/</a> 。</p>

        <div class='clearfix'></div>
      </div>
    </div>
    <div id='footer'>
      Hosted by <a href='http://github.com' target='_blank'>GitHub</a> and powered by <a href='http://github.com/mojombo/jekyll'>Jekyll</a>.
    </div>
  </body>
</html>

